<!doctype html><html lang=en class="js csstransforms3d">
<head>
<meta charset=utf-8>
<meta name=viewport content="width=device-width,initial-scale=1">
<meta name=generator content="Hugo 0.92.0">
<meta name=description content>
<link rel=icon href=/myriad/images/favicon.png type=image/png>
<title>Discriminated Unions :: Myriad</title>
<link href=/myriad/css/nucleus.css?1643052652 rel=stylesheet>
<link href=/myriad/css/fontawesome-all.min.css?1643052652 rel=stylesheet>
<link href=/myriad/css/featherlight.min.css?1643052652 rel=stylesheet>
<link href=/myriad/css/perfect-scrollbar.min.css?1643052652 rel=stylesheet>
<link href=/myriad/css/auto-complete.css?1643052652 rel=stylesheet>
<link href=/myriad/css/theme.css?1643052652 rel=stylesheet>
<link href=/myriad/css/tabs.css?1643052652 rel=stylesheet>
<link href=/myriad/css/hugo-theme.css?1643052652 rel=stylesheet>
<script src=/myriad/js/jquery.min.js?1643052652></script>
<style>:root #header+#content>#left>#rlblock_left{display:none!important}</style>
</head>
<body data-url=/myriad/plugins/du-extensions/>
<nav id=sidebar>
<div id=header-wrapper>
<div id=header>
<h1>Myriad</h1>
</div>
<div class=searchbox>
<label for=search-by><i class="fas fa-search"></i></label>
<input data-search-input id=search-by type=search placeholder=Search...>
<span data-search-clear><i class="fas fa-times"></i></span>
</div>
<script src=/myriad/js/lunr.min.js?1643052652></script>
<script src=/myriad/js/auto-complete.js?1643052652></script>
<script>var index_url="/myriad/index.json",root_url="/",baseUri=root_url.replace(/\/$/,'')</script>
<script src=/myriad/js/search.js?1643052652></script>
</div>
<div id=homelinks>
<ul>
<li>
<a class=padding href=/myriad/><i class="fas fa-home"></i> Home</a>
</li>
</ul>
</div>
<div class=highlightable>
<ul class=topics>
<li data-nav-id=/myriad/tutorials/ title=Tutorials class=dd-item><a href=/myriad/tutorials/><b>1. </b>Tutorials</a><ul>
<li data-nav-id=/myriad/tutorials/configuration/ title="Configuration And Plugins" class=dd-item><a href=/myriad/tutorials/configuration/>Configuration And Plugins</a></li>
<li data-nav-id=/myriad/tutorials/debugging/ title=Debugging class=dd-item><a href=/myriad/tutorials/debugging/>Debugging</a></li>
<li data-nav-id=/myriad/tutorials/external-plugins/ title="External Plugins" class=dd-item><a href=/myriad/tutorials/external-plugins/>External Plugins</a></li>
<li data-nav-id=/myriad/tutorials/msbuild-usage/ title="MSBuild usage" class=dd-item><a href=/myriad/tutorials/msbuild-usage/>MSBuild usage</a></li></ul></li>
<li data-nav-id=/myriad/plugins/ title=Plugins class="dd-item parent"><a href=/myriad/plugins/><b>2. </b>Plugins</a><ul>
<li data-nav-id=/myriad/plugins/record-fields/ title=Records class=dd-item><a href=/myriad/plugins/record-fields/>Records</a></li>
<li data-nav-id=/myriad/plugins/du-extensions/ title="Discriminated Unions" class="dd-item active"><a href=/myriad/plugins/du-extensions/>Discriminated Unions</a></li>
<li data-nav-id=/myriad/plugins/lenses/ title=Lenses class=dd-item><a href=/myriad/plugins/lenses/>Lenses</a></li></ul></li>
<li data-nav-id=/myriad/how-tos/ title="How To's" class=dd-item><a href=/myriad/how-tos/><b>3. </b>How To's</a><ul>
<li data-nav-id=/myriad/how-tos/creating-a-generator/ title="Creating a Generator" class=dd-item><a href=/myriad/how-tos/creating-a-generator/><i class="fas fa-external-link-square-alt"></i> Creating a Generator</a></li></ul></li>
</ul>
<div id=footer>
<p>Built with <a href=https://github.com/McShelby/hugo-theme-relearn><i class="fas fa-heart"></i></a> by <a href=https://gohugo.io/>Hugo</a></p>
</div>
</div>
</nav>
<div id=body>
<div id=overlay></div>
<div class="padding highlightable">
<div>
<div id=top-bar>
<div id=breadcrumbs>
<span id=sidebar-toggle-span>
<a href=# id=sidebar-toggle data-sidebar-toggle>
<i class="fas fa-bars"></i>
</a>
</span>
<span id=toc-menu><i class="fas fa-list-alt"></i></span>
<ol class=links itemscope itemtype=http://schema.org/BreadcrumbList>
<meta itemprop=itemListOrder content="Descending">
<li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><meta itemprop=position content="3"><a itemprop=item href=/myriad/><span itemprop=name>Myriad Overview</span></a> > </li>
<li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><meta itemprop=position content="2"><a itemprop=item href=/myriad/plugins/><span itemprop=name>Plugins</span></a> > </li>
<li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><meta itemprop=position content="1"><a itemprop=item href=/myriad/plugins/du-extensions/ aria-disabled=true><span itemprop=name>Discriminated Unions</span></a></li>
</ol>
</div>
<div class=progress>
<div class=wrapper>
<nav id=TableOfContents></nav>
</div>
</div>
</div>
</div>
<div id=head-tags>
</div>
<main id=body-inner>
<h1>Discriminated Unions</h1>
<p>The input file in this example <code>Library.fs</code> looks like this:</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fsharp data-lang=fsharp><span style=color:#66d9ef>namespace</span> Example
<span style=color:#66d9ef>open</span> Myriad.Plugins

<span style=color:#f92672>[&lt;</span>Generator.DuCases <span style=color:#e6db74>&#34;dus&#34;</span> <span style=color:#f92672>&gt;]</span>
<span style=color:#66d9ef>type</span> <span style=color:#a6e22e>Currency</span> <span style=color:#f92672>=</span>
<span style=color:#f92672>|</span> CAD
<span style=color:#f92672>|</span> PLN
<span style=color:#f92672>|</span> EUR
<span style=color:#f92672>|</span> USD
<span style=color:#f92672>|</span> Custom <span style=color:#66d9ef>of</span> <span style=color:#66d9ef>string</span>

</code></pre></div><p>An attribute is used by the plugin so that the code generator plugin knows which parts of the input AST are to be used by the plugin. If you had several records and you only wanted the fields plugin to operate on <code>Currency</code> then the attribute would be used like in the example about to only apply <code>Generator.DuCases</code> to <code>Currency</code>. Note, if you wanted a plugin that just needs the whole input AST then there is no need to provide an input. Myriad aims to be a library rather than a full framework that ties you to the mechanism used to input and generate code.</p>
<p>To control what namespace is used as well as supplying any other information to plugins a <code>myriad.toml</code> configuration file is used. This is specified in the generator attribute, in the example above you can see the configuration section is <code>dus</code> <code>[&lt;Generator.DuCases "dus" >]</code>. The corresponding <code>myriad.toml</code> file looks as follows:</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-toml data-lang=toml>[<span style=color:#a6e22e>dus</span>]
<span style=color:#a6e22e>namespace</span> = <span style=color:#e6db74>&#34;TestDus&#34;</span>
</code></pre></div><p>The DuCases plugin uses only a single configuration key <code>namespace</code> to control the resulting namespace the DuCases are generated</p>
<p>The fields plugin in this example will generate the following code at prebuild time and compile the code into your assembly:</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fsharp data-lang=fsharp><span style=color:#75715e>//------------------------------------------------------------------------------
</span><span style=color:#75715e>//        This code was generated by myriad.
</span><span style=color:#75715e>//        Changes to this file will be lost when the code is regenerated.
</span><span style=color:#75715e>//------------------------------------------------------------------------------
</span><span style=color:#75715e></span><span style=color:#66d9ef>namespace</span> <span style=color:#66d9ef>rec</span> TestDus

<span style=color:#66d9ef>module</span> Currency <span style=color:#f92672>=</span>
    <span style=color:#66d9ef>open</span> Input

    <span style=color:#66d9ef>let</span> toString <span style=color:#f92672>(</span>x<span style=color:#f92672>:</span> Currency<span style=color:#f92672>)</span> <span style=color:#f92672>=</span>
        <span style=color:#66d9ef>match</span> x <span style=color:#66d9ef>with</span>
        <span style=color:#f92672>|</span> CAD <span style=color:#f92672>-&gt;</span> <span style=color:#e6db74>&#34;CAD&#34;</span>
        <span style=color:#f92672>|</span> PLN <span style=color:#f92672>-&gt;</span> <span style=color:#e6db74>&#34;PLN&#34;</span>
        <span style=color:#f92672>|</span> EUR <span style=color:#f92672>-&gt;</span> <span style=color:#e6db74>&#34;EUR&#34;</span>
        <span style=color:#f92672>|</span> USD <span style=color:#f92672>-&gt;</span> <span style=color:#e6db74>&#34;USD&#34;</span>
        <span style=color:#f92672>|</span> Custom <span style=color:#f92672>_</span> <span style=color:#f92672>-&gt;</span> <span style=color:#e6db74>&#34;Custom&#34;</span>

    <span style=color:#66d9ef>let</span> fromString <span style=color:#f92672>(</span>x<span style=color:#f92672>:</span> <span style=color:#66d9ef>string</span><span style=color:#f92672>)</span> <span style=color:#f92672>=</span>
        <span style=color:#66d9ef>match</span> x <span style=color:#66d9ef>with</span>
        <span style=color:#f92672>|</span> <span style=color:#e6db74>&#34;CAD&#34;</span> <span style=color:#f92672>-&gt;</span> Some CAD
        <span style=color:#f92672>|</span> <span style=color:#e6db74>&#34;PLN&#34;</span> <span style=color:#f92672>-&gt;</span> Some PLN
        <span style=color:#f92672>|</span> <span style=color:#e6db74>&#34;EUR&#34;</span> <span style=color:#f92672>-&gt;</span> Some EUR
        <span style=color:#f92672>|</span> <span style=color:#e6db74>&#34;USD&#34;</span> <span style=color:#f92672>-&gt;</span> Some USD
        <span style=color:#f92672>|</span> <span style=color:#f92672>_</span> <span style=color:#f92672>-&gt;</span> None

    <span style=color:#66d9ef>let</span> toTag <span style=color:#f92672>(</span>x<span style=color:#f92672>:</span> Currency<span style=color:#f92672>)</span> <span style=color:#f92672>=</span>
        <span style=color:#66d9ef>match</span> x <span style=color:#66d9ef>with</span>
        <span style=color:#f92672>|</span> CAD <span style=color:#f92672>-&gt;</span> 0
        <span style=color:#f92672>|</span> PLN <span style=color:#f92672>-&gt;</span> 1
        <span style=color:#f92672>|</span> EUR <span style=color:#f92672>-&gt;</span> 2
        <span style=color:#f92672>|</span> USD <span style=color:#f92672>-&gt;</span> 3
        <span style=color:#f92672>|</span> Custom <span style=color:#f92672>_</span> <span style=color:#f92672>-&gt;</span> 4

    <span style=color:#66d9ef>let</span> isCAD <span style=color:#f92672>(</span>x<span style=color:#f92672>:</span> Currency<span style=color:#f92672>)</span> <span style=color:#f92672>=</span>
        <span style=color:#66d9ef>match</span> x <span style=color:#66d9ef>with</span>
        <span style=color:#f92672>|</span> CAD <span style=color:#f92672>-&gt;</span> <span style=color:#66d9ef>true</span>
        <span style=color:#f92672>|</span> <span style=color:#f92672>_</span> <span style=color:#f92672>-&gt;</span> <span style=color:#66d9ef>false</span>

    <span style=color:#66d9ef>let</span> isPLN <span style=color:#f92672>(</span>x<span style=color:#f92672>:</span> Currency<span style=color:#f92672>)</span> <span style=color:#f92672>=</span>
        <span style=color:#66d9ef>match</span> x <span style=color:#66d9ef>with</span>
        <span style=color:#f92672>|</span> PLN <span style=color:#f92672>-&gt;</span> <span style=color:#66d9ef>true</span>
        <span style=color:#f92672>|</span> <span style=color:#f92672>_</span> <span style=color:#f92672>-&gt;</span> <span style=color:#66d9ef>false</span>

    <span style=color:#66d9ef>let</span> isEUR <span style=color:#f92672>(</span>x<span style=color:#f92672>:</span> Currency<span style=color:#f92672>)</span> <span style=color:#f92672>=</span>
        <span style=color:#66d9ef>match</span> x <span style=color:#66d9ef>with</span>
        <span style=color:#f92672>|</span> EUR <span style=color:#f92672>-&gt;</span> <span style=color:#66d9ef>true</span>
        <span style=color:#f92672>|</span> <span style=color:#f92672>_</span> <span style=color:#f92672>-&gt;</span> <span style=color:#66d9ef>false</span>

    <span style=color:#66d9ef>let</span> isUSD <span style=color:#f92672>(</span>x<span style=color:#f92672>:</span> Currency<span style=color:#f92672>)</span> <span style=color:#f92672>=</span>
        <span style=color:#66d9ef>match</span> x <span style=color:#66d9ef>with</span>
        <span style=color:#f92672>|</span> USD <span style=color:#f92672>-&gt;</span> <span style=color:#66d9ef>true</span>
        <span style=color:#f92672>|</span> <span style=color:#f92672>_</span> <span style=color:#f92672>-&gt;</span> <span style=color:#66d9ef>false</span>

    <span style=color:#66d9ef>let</span> isCustom <span style=color:#f92672>(</span>x<span style=color:#f92672>:</span> Currency<span style=color:#f92672>)</span> <span style=color:#f92672>=</span>
        <span style=color:#66d9ef>match</span> x <span style=color:#66d9ef>with</span>
        <span style=color:#f92672>|</span> Custom <span style=color:#f92672>_</span> <span style=color:#f92672>-&gt;</span> <span style=color:#66d9ef>true</span>
        <span style=color:#f92672>|</span> <span style=color:#f92672>_</span> <span style=color:#f92672>-&gt;</span> <span style=color:#66d9ef>false</span>
</code></pre></div>
<footer class=footline>
</footer>
</main>
</div>
<div id=navigation>
<a class="nav nav-prev" href=/myriad/plugins/record-fields/ title=Records><i class="fa fa-chevron-left"></i></a>
<a class="nav nav-next" href=/myriad/plugins/lenses/ title=Lenses><i class="fa fa-chevron-right"></i></a>
</div>
</div>
<div style=left:-1000px;overflow:scroll;position:absolute;top:-1000px;border:none;box-sizing:content-box;height:200px;margin:0;padding:0;width:200px>
<div style=border:none;box-sizing:content-box;height:200px;margin:0;padding:0;width:200px></div>
</div>
<script src=/myriad/js/clipboard.min.js?1643052652></script>
<script src=/myriad/js/perfect-scrollbar.min.js?1643052652></script>
<script src=/myriad/js/perfect-scrollbar.jquery.min.js?1643052652></script>
<script src=/myriad/js/jquery.sticky.js?1643052652></script>
<script src=/myriad/js/jquery.svg.pan.zoom.js?1643052652></script>
<script src=/myriad/js/featherlight.min.js?1643052652></script>
<script src=/myriad/js/modernizr.custom-3.6.0.js?1643052652></script>
<script src=/myriad/js/mermaid.min.js?1643052652></script>
<script>typeof mermaid!='undefined'&&mermaid.mermaidAPI.initialize(Object.assign({securityLevel:"antiscript"},JSON.parse('{ "startOnLoad": true }'),{startOnLoad:!1}))</script>
<script src=/myriad/js/relearn.js?1643052652></script>
</body>
</html>